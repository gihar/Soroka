# =============================================================================
# Soroka - Конфигурация переменных окружения
# =============================================================================

# =============================================================================
# ОБЯЗАТЕЛЬНЫЕ НАСТРОЙКИ
# =============================================================================

# Telegram Bot Token (получить у @BotFather)
TELEGRAM_TOKEN=your_telegram_bot_token_here

# =============================================================================
# LLM ПРОВАЙДЕРЫ (настройте хотя бы один)
# =============================================================================

# OpenAI API
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo

# Опционально: Несколько пресетов моделей OpenAI (JSON-массив)
# Если не задано, пресет по умолчанию будет собран из OPENAI_MODEL/OPENAI_BASE_URL
# Пример:
# OPENAI_MODELS=[
#   {"key": "openai_gpt4o", "name": "OpenAI: gpt-4o", "model": "gpt-4o", "base_url": "https://api.openai.com/v1"},
#   {"key": "openrouter_llama3_70b", "name": "OpenRouter: Llama 3.1 70B", "model": "meta-llama/llama-3.1-70b-instruct", "base_url": "https://openrouter.ai/api/v1"}
# ]

# Таймаут ожидания ответа от LLM (в секундах)
LLM_TIMEOUT_SECONDS=30

# HTTP заголовки для LLM запросов
HTTP_REFERER=https://github.com/gihar/Soroka
X_TITLE=Soroka

# Anthropic Claude
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Yandex GPT
YANDEX_API_KEY=your_yandex_api_key_here
YANDEX_FOLDER_ID=your_yandex_folder_id_here

# =============================================================================
# БАЗА ДАННЫХ
# =============================================================================

# URL базы данных (по умолчанию SQLite)
DATABASE_URL=sqlite:///bot.db

# =============================================================================
# НАСТРОЙКИ ФАЙЛОВ
# =============================================================================

# Максимальный размер файла для Telegram Bot API (в байтах)
MAX_FILE_SIZE=20971520

# Максимальный размер внешнего файла (Google Drive, Яндекс.Диск) в байтах
MAX_EXTERNAL_FILE_SIZE=52428800

# (опционально) Максимальный размер файла для транскрипции в мегабайтах
# Если не указано, ограничение берётся из MAX_FILE_SIZE
OOM_MAX_FILE_SIZE_MB=

# Директория для временных файлов
TEMP_DIR=temp

# =============================================================================
# ЛОГИРОВАНИЕ
# =============================================================================

# Уровень логирования (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# =============================================================================
# SSL НАСТРОЙКИ
# =============================================================================

# Проверка SSL сертификатов (false для отключения)
SSL_VERIFY=false

# =============================================================================
# ТРАНСКРИПЦИЯ
# =============================================================================

# Режим транскрипции: local, cloud, hybrid, speechmatics, deepgram, leopard
TRANSCRIPTION_MODE=hybrid

# Groq API для облачной транскрипции
GROQ_API_KEY=your_groq_api_key_here
GROQ_MODEL=whisper-large-v3-turbo

# Speechmatics API для профессиональной транскрипции
SPEECHMATICS_API_KEY=your_speechmatics_api_key_here
SPEECHMATICS_LANGUAGE=ru
SPEECHMATICS_DOMAIN=
# Операционная точка Speechmatics: standard (быстро) или enhanced (точнее)
SPEECHMATICS_OPERATING_POINT=standard

# Deepgram API для высококачественной транскрипции
DEEPGRAM_API_KEY=your_deepgram_api_key_here
DEEPGRAM_MODEL=nova-2
DEEPGRAM_LANGUAGE=ru

# =============================================================================
# ДИАРИЗАЦИЯ (РАЗДЕЛЕНИЕ ГОВОРЯЩИХ)
# =============================================================================

# Включить диаризацию (true/false)
ENABLE_DIARIZATION=true

# Провайдер диаризации: whisperx, pyannote, picovoice
DIARIZATION_PROVIDER=whisperx

# Hugging Face токен (для моделей диаризации)
HUGGINGFACE_TOKEN=your_huggingface_token_here_optional

# Picovoice Access Key (для облачной диаризации)
PICOVOICE_ACCESS_KEY=your_picovoice_access_key_here_optional

# Путь к языковой модели Leopard (.pv). Для русского языка укажите путь к русской модели.
# Пример: LEOPARD_MODEL_PATH=/app/models/leopard_params_ru.pv
LEOPARD_MODEL_PATH=

# Устройство для диаризации: auto, cpu, mps, cuda
DIARIZATION_DEVICE=auto

# Тип вычислений: auto, int8, float16, float32
COMPUTE_TYPE=auto

# Максимальное количество говорящих
MAX_SPEAKERS=10

# Минимальное количество говорящих
MIN_SPEAKERS=1

# =============================================================================
# УЛУЧШЕНИЯ КАЧЕСТВА ПРОТОКОЛОВ
# =============================================================================

# Двухэтапная генерация протокола (извлечение + рефлексия)
TWO_STAGE_PROCESSING=true

# Расширенный анализ данных диаризации
ENABLE_DIARIZATION_ANALYSIS=true

# Предобработка текста транскрипции (удаление междометий, нормализация)
ENABLE_TEXT_PREPROCESSING=true

# Валидация и оценка качества протоколов
ENABLE_PROTOCOL_VALIDATION=true

# Автоопределение типа встречи для специализированных промптов
MEETING_TYPE_DETECTION=true

# Порог длительности встречи для Chain-of-Thought подхода (в минутах)
CHAIN_OF_THOUGHT_THRESHOLD_MINUTES=30

# Максимальное количество сегментов для параллельной обработки в Chain-of-Thought
# Пусто = без ограничений (максимальная скорость)
# 3-5 = умеренная нагрузка (рекомендуется при rate limits)
# 1-2 = консервативный подход (минимальная нагрузка на API)
MAX_PARALLEL_SEGMENTS=

# =============================================================================
# СТРУКТУРИРОВАННЫЕ ПРЕДСТАВЛЕНИЯ (ЭКСПЕРИМЕНТАЛЬНО)
# =============================================================================

# Построение структурированного представления встречи
# ВНИМАНИЕ: Включение увеличивает время обработки на 20-30%
ENABLE_MEETING_STRUCTURE=false

# Модель для извлечения структурированных данных (опционально)
# Если не указано, используется основная модель OPENAI_MODEL
STRUCTURE_EXTRACTION_MODEL=gpt-4

# Кэшировать структурированные представления встреч
CACHE_MEETING_STRUCTURES=true

# =============================================================================
# СОПОСТАВЛЕНИЕ УЧАСТНИКОВ (SPEAKER MAPPING)
# =============================================================================

# Автоматическое сопоставление спикеров с участниками
# Требует включенной диаризации (ENABLE_DIARIZATION=true)
ENABLE_SPEAKER_MAPPING=true

# Порог уверенности для сопоставления спикеров (0.0-1.0)
# Сопоставления с confidence ниже порога будут отклонены
SPEAKER_MAPPING_CONFIDENCE_THRESHOLD=0.7

# Максимальное количество участников в списке
MAX_PARTICIPANTS=20

# =============================================================================
# ПРОИЗВОДИТЕЛЬНОСТЬ (опционально)
# =============================================================================

# Размер кэша в байтах (по умолчанию 100MB)
CACHE_SIZE=104857600

# Время жизни кэша в секундах (по умолчанию 1 час)
CACHE_TTL=3600

# Максимальное количество параллельных задач
MAX_CONCURRENT_TASKS=5

# =============================================================================
# БЕЗОПАСНОСТЬ (опционально)
# =============================================================================

# Rate limiting - запросов в минуту
RATE_LIMIT_PER_MINUTE=60

# Максимальное количество файлов в очереди
MAX_QUEUE_SIZE=10

# Администраторы бота (список Telegram ID через запятую)
# Получите свой ID, отправив /start боту @userinfobot
# Пример: ADMINS=123456789,987654321
ADMINS=

# =============================================================================
# ПРИМЕРЫ ЗНАЧЕНИЙ
# =============================================================================

# Примеры для разных окружений:

# РАЗРАБОТКА
# LOG_LEVEL=DEBUG
# ENABLE_DIARIZATION=false
# TRANSCRIPTION_MODE=local

# ПРОДАКШЕН
# LOG_LEVEL=WARNING
# ENABLE_DIARIZATION=true
# TRANSCRIPTION_MODE=speechmatics
# SSL_VERIFY=true

# ТЕСТИРОВАНИЕ
# LOG_LEVEL=DEBUG
# MAX_FILE_SIZE=10485760
# ENABLE_DIARIZATION=false
