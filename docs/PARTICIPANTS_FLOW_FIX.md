# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤—Å—Ç—Ä–µ—á–∏

**–î–∞—Ç–∞**: 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤" –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–ª –æ—à–∏–±–∫—É:

```
‚ùå –û—à–∏–±–∫–∞: —à–∞–±–ª–æ–Ω –Ω–µ –≤—ã–±—Ä–∞–Ω
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–ª–∞—Å—å –ø–µ—Ä–µ–π—Ç–∏ –∫ –≤—ã–±–æ—Ä—É LLM –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞.

## –ü—Ä–∏—á–∏–Ω–∞

–ö–Ω–æ–ø–∫–∞ "üë• –£–∫–∞–∑–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤—Å—Ç—Ä–µ—á–∏" –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ç–æ–º –∂–µ —ç–∫—Ä–∞–Ω–µ, —á—Ç–æ –∏ –≤—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–∞ –∫ –≤—ã–±–æ—Ä—É LLM, –Ω–æ `template_id` –µ—â–µ –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ FSM state.

## –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. –¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —ç–∫—Ä–∞–Ω—É –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞**, –∞ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –≤—ã–±–æ—Ä—É LLM.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### –§–∞–π–ª: `src/handlers/participants_handlers.py`

–ò–∑–º–µ–Ω–µ–Ω—ã 4 —Ñ—É–Ω–∫—Ü–∏–∏:

1. **`confirm_meeting_info`** (—Å—Ç—Ä–æ–∫–∏ 427-452)
2. **`save_meeting_info`** (—Å—Ç—Ä–æ–∫–∏ 454-495)
3. **`confirm_participants`** (—Å—Ç—Ä–æ–∫–∏ 497-522)
4. **`save_and_confirm_participants`** (—Å—Ç—Ä–æ–∫–∏ 524-559)

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

**–ë—ã–ª–æ:**
```python
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É LLM
from src.handlers.message_handlers import _show_llm_selection_for_file
from src.services.enhanced_llm_service import EnhancedLLMService
from src.services.optimized_processing_service import OptimizedProcessingService

llm_service = EnhancedLLMService()
processing_service = OptimizedProcessingService()

await _show_llm_selection_for_file(
    callback.message, state, llm_service, processing_service
)
```

**–°—Ç–∞–ª–æ:**
```python
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –≤—ã–±–æ—Ä—É —à–∞–±–ª–æ–Ω–∞
from src.handlers.message_handlers import _show_template_selection
from src.services.template_service import TemplateService

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
await callback.message.answer(
    f"‚úÖ –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω ({participants_count} —á–µ–ª.)\n\n"
    f"üìù –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:"
)

template_service = TemplateService()
await _show_template_selection(callback.message, template_service, state)
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª
2. –ü–æ—è–≤–ª—è–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞:
   - ü§ñ –£–º–Ω—ã–π –≤—ã–±–æ—Ä
   - üìã –ü–æ —à–∞–±–ª–æ–Ω—É
   - ‚öôÔ∏è –ó–∞–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
   - üë• **–£–∫–∞–∑–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤—Å—Ç—Ä–µ—á–∏** ‚Üê –Ω–∞–∂–∏–º–∞–µ—Ç —ç—Ç–æ

3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ email –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
5. –í–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "‚úÖ –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω (17 —á–µ–ª.)"
6. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —ç–∫—Ä–∞–Ω—É –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞** (—à–∞–≥ 2)
7. –í—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω (–£–º–Ω—ã–π –≤—ã–±–æ—Ä / –ü–æ —à–∞–±–ª–æ–Ω—É)
8. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –≤—ã–±–æ—Ä—É LLM
9. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

‚úÖ –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –≤—ã–±–æ—Ä–æ–º —à–∞–±–ª–æ–Ω–∞  
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–æ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞  
‚úÖ –õ–æ–≥–∏–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –æ "–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —à–∞–±–ª–æ–Ω–µ"  

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª
   - –ù–∞–∂–∞—Ç—å "–£–∫–∞–∑–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
   - –í—ã–±—Ä–∞—Ç—å "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ—á—å"
   - –í—Å—Ç–∞–≤–∏—Ç—å email —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—Å—Ç—Ä–µ—á–µ
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å ‚Üí –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É —à–∞–±–ª–æ–Ω–∞

2. **–†—É—á–Ω–æ–π –≤–≤–æ–¥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª
   - –ù–∞–∂–∞—Ç—å "–£–∫–∞–∑–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
   - –í—ã–±—Ä–∞—Ç—å "–í–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫"
   - –í–≤–µ—Å—Ç–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å ‚Üí –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É —à–∞–±–ª–æ–Ω–∞

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
   - –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   - –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –≤ –ë–î
   - –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É —à–∞–±–ª–æ–Ω–∞

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [PARTICIPANT_MAPPING.md](./PARTICIPANT_MAPPING.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [UX_IMPROVEMENTS.md](./UX_IMPROVEMENTS.md) - –û–±—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

