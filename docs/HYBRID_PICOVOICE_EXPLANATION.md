# –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º —Å Picovoice: –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéØ –í–æ–ø—Ä–æ—Å: –ö–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ `TRANSCRIPTION_MODE=hybrid` –∏ `DIARIZATION_PROVIDER=picovoice`?

**–û—Ç–≤–µ—Ç: Picovoice Falcon –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –≤ –≥–∏–±—Ä–∏–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ.**

## üìä –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

```mermaid
graph TD
    A["–ê—É–¥–∏–æ —Ñ–∞–π–ª"] --> B{"TRANSCRIPTION_MODE=hybrid?"}
    B -->|–î–∞| C["–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥"]
    B -->|–ù–µ—Ç| D["–î—Ä—É–≥–∏–µ —Ä–µ–∂–∏–º—ã"]
    
    C --> E["1. –û–±–ª–∞—á–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è"]
    E --> F["Groq API + whisper-large-v3-turbo"]
    F --> G["–ë—ã—Å—Ç—Ä—ã–π —Ç–µ–∫—Å—Ç"]
    
    G --> H["2. –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è"]
    H --> I{"DIARIZATION_PROVIDER=?"}
    I -->|picovoice| J["Picovoice Falcon"]
    I -->|whisperx| K["WhisperX + pyannote"]
    I -->|pyannote| L["Pyannote.audio"]
    
    J --> M["–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≥–æ–≤–æ—Ä—è—â–∏—Ö"]
    K --> M
    L --> M
    
    M --> N["3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"]
    N --> O["–§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–µ–π"]
```

## üîß –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 1: –û–±–ª–∞—á–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (30% –≤—Ä–µ–º–µ–Ω–∏)
```python
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
if file_size <= 25MB:
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Groq API
    transcription = await groq_client.transcribe(file_path)
else:
    # Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é
    transcription = whisper_model.transcribe(file_path)
```

### –≠—Ç–∞–ø 2: –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è (70% –≤—Ä–µ–º–µ–Ω–∏)
```python
# 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –∫ –∞—É–¥–∏–æ —Ñ–∞–π–ª—É
if DIARIZATION_PROVIDER == "picovoice":
    diarization_result = await picovoice_service.diarize_file(file_path)
elif DIARIZATION_PROVIDER == "whisperx":
    diarization_result = whisperx_service.diarize_file(file_path)
elif DIARIZATION_PROVIDER == "pyannote":
    diarization_result = pyannote_service.diarize_file(file_path)
```

### –≠—Ç–∞–ø 3: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (100%)
```python
# 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–µ–π
result = {
    "transcription": transcription,  # –¢–µ–∫—Å—Ç –∏–∑ Groq API
    "diarization": diarization_result,  # –ì–æ–≤–æ—Ä—è—â–∏–µ –∏–∑ Picovoice
    "speakers_text": speakers_text,  # –¢–µ–∫—Å—Ç –ø–æ –≥–æ–≤–æ—Ä—è—â–∏–º
    "formatted_transcript": formatted_transcript  # "SPEAKER_1: —Ç–µ–∫—Å—Ç"
}
```

## üéØ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å

### –ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
```env
TRANSCRIPTION_MODE=hybrid
DIARIZATION_PROVIDER=picovoice
ENABLE_DIARIZATION=true
```

### –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:

1. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è**: **Groq API** (–æ–±–ª–∞—á–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è)
   - –ú–æ–¥–µ–ª—å: `whisper-large-v3-turbo`
   - –í—Ä–µ–º—è: ~30% –æ—Ç –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ö–∞—á–µ—Å—Ç–≤–æ: –í—ã—Å–æ–∫–æ–µ

2. **–î–∏–∞—Ä–∏–∑–∞—Ü–∏—è**: **Picovoice Falcon** (–ª–æ–∫–∞–ª—å–Ω–∞—è)
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `pvfalcon`
   - –í—Ä–µ–º—è: ~70% –æ—Ç –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ö–∞—á–µ—Å—Ç–≤–æ: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–µ

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

### ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å
- **–û–±–ª–∞—á–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è**: –ë—ã—Å—Ç—Ä–µ–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤ 2-3 —Ä–∞–∑–∞
- **Picovoice –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### üéØ –ö–∞—á–µ—Å—Ç–≤–æ
- **Groq API**: Whisper Large v3 Turbo (–ª—É—á—à–∞—è –º–æ–¥–µ–ª—å)
- **Picovoice Falcon**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã ML

### üí∞ –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≤ –æ–±–ª–∞–∫–µ
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è**: –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## üîÑ Fallback –ª–æ–≥–∏–∫–∞

### –ï—Å–ª–∏ Groq API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (Whisper)
2. **Picovoice –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è** (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
3. –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### –ï—Å–ª–∏ Picovoice –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
1. Groq —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ WhisperX –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
3. Fallback –∫ Pyannote.audio –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

| –†–µ–∂–∏–º | –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è | –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è | –í—Ä–µ–º—è | –ö–∞—á–µ—Å—Ç–≤–æ |
|-------|-------------|------------|-------|----------|
| **Local** | Whisper | WhisperX | 100% | –í—ã—Å–æ–∫–æ–µ |
| **Cloud** | Groq API | –ù–µ—Ç | 30% | –í—ã—Å–æ–∫–æ–µ |
| **Hybrid + Picovoice** | Groq API | Picovoice | 50% | **–û—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–µ** |
| **Hybrid + WhisperX** | Groq API | WhisperX | 60% | –í—ã—Å–æ–∫–æ–µ |

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
# –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º (–ª—É—á—à–µ–µ –∏–∑ –¥–≤—É—Ö –º–∏—Ä–æ–≤)
TRANSCRIPTION_MODE=hybrid
GROQ_API_KEY=your_groq_api_key

# Picovoice –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
DIARIZATION_PROVIDER=picovoice
PICOVOICE_ACCESS_KEY=your_picovoice_key
ENABLE_DIARIZATION=true

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GROQ_MODEL=whisper-large-v3-turbo
MAX_SPEAKERS=10
```

## üí° –ò—Ç–æ–≥

**–ü—Ä–∏ –≤–∞—à–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ **Groq API** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- ‚úÖ **Picovoice Falcon** –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ** —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ

**–≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏!** üéØ
